{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/metrics/datadog/index.ts"],"names":[],"mappings":";;;;;AAAA,oDAA4B;AAC5B,gDAAwB;AAExB,0DAAmC;AAEnC,MAAM,iBAAiB,GAAG,cAAI,CAAC,SAAS,CAAC,gBAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AAE7D,IAAI,CAAC,gBAAM,CAAC,OAAO,CAAC,QAAQ,EAAE;IAC5B,gBAAM,CAAC,UAAU,CAAC;QAChB,OAAO,EAAE,gBAAM,CAAC,OAAO,CAAC,MAAM;QAC9B,OAAO,EAAE,gBAAM,CAAC,OAAO,CAAC,MAAM;KAC9B,CAAC,CAAC;CACL;AAED,MAAM,IAAI,GAAG;IACX,OAAO,gBAAM,CAAC,aAAa,EAAE;IAC7B,YAAY,gBAAM,CAAC,QAAQ,EAAE;CAC9B,CAAC;AAEF,SAAgB,UAAU,CAAC,IAAY,EAAE,KAAa,EAAE,cAAyB;IAC/E,IAAI,CAAC,gBAAM,CAAC,OAAO,CAAC,QAAQ,EAAE;QAC5B,OAAO,iBAAiB,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE,IAAI,EAAE,CAAC,GAAG,IAAI,EAAE,GAAG,CAAC,cAAc,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;KACvF;AACH,CAAC;AAJD,gCAIC","sourcesContent":["import dogapi from 'dogapi';\nimport util from 'util';\n\nimport config from 'turtle/config';\n\nconst datadogSendMetric = util.promisify(dogapi.metric.send);\n\nif (!config.datadog.disabled) {\n  dogapi.initialize({\n    api_key: config.datadog.apiKey,\n    app_key: config.datadog.appKey,\n   });\n}\n\nconst tags = [\n  `env:${config.deploymentEnv}`,\n  `platform:${config.platform}`,\n];\n\nexport function sendMetric(name: string, value: number, additionalTags?: string[]) {\n  if (!config.datadog.disabled) {\n    return datadogSendMetric(name, value, { tags: [...tags, ...(additionalTags || [])] });\n  }\n}\n"]}