{"version":3,"file":"ios.js","sourceRoot":"","sources":["../../src/setup/ios.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,wDAA0B;AAC1B,4CAAoB;AACpB,gDAAwB;AAExB,yEAA+D;AAC/D,uDAAmC;AACnC,sDAA8C;AAE9C,KAAK,UAAU,qCAAqC;IAClD,MAAM,uBAAuB,GAAG,cAAI,CAAC,IAAI,CAAC,YAAE,CAAC,OAAO,EAAE,EAAE,4CAA4C,CAAC,CAAC;IACtG,MAAM,MAAM,GAAG,MAAM,kBAAE,CAAC,UAAU,CAAC,uBAAuB,CAAC,CAAC;IAC5D,IAAI,MAAM,EAAE;QACV,MAAM,oBAAoB,GAAG,CAAC,MAAM,kBAAE,CAAC,OAAO,CAAC,uBAAuB,CAAC,CAAC,CAAC,MAAM,CAC7E,CAAC,QAAQ,EAAE,EAAE,CAAC,cAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,kBAAkB,CAC5D,CAAC;QACF,MAAM,OAAO,CAAC,GAAG,CAAC,oBAAoB,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,kBAAE,CAAC,MAAM,CAAC,cAAI,CAAC,IAAI,CAAC,uBAAuB,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;KAC5G;AACH,CAAC;AAEc,KAAK,UAAU,KAAK;IACjC,gBAAM,CAAC,IAAI,CAAC,2BAA2B,CAAC,CAAC;IACzC,MAAM,qCAAqC,EAAE,CAAC;IAC9C,MAAM,QAAQ,CAAC,OAAO,EAAE,CAAC;IACzB,MAAM,gBAAW,EAAE,CAAC;IACpB,gBAAM,CAAC,IAAI,CAAC,iCAAiC,CAAC,CAAC;AACjD,CAAC;AAND,wBAMC","sourcesContent":["import fs from 'fs-extra';\nimport os from 'os';\nimport path from 'path';\n\nimport * as keychain from 'turtle/builders/utils/ios/keychain';\nimport logger from 'turtle/logger';\nimport commonSetup from 'turtle/setup/common';\n\nasync function deleteProvisioningProfilesFromHomedir() {\n  const provisioningProfilesDir = path.join(os.homedir(), 'Library/MobileDevice/Provisioning Profiles');\n  const exists = await fs.pathExists(provisioningProfilesDir);\n  if (exists) {\n    const provisioningProfiles = (await fs.readdir(provisioningProfilesDir)).filter(\n      (filename) => path.extname(filename) === '.mobileprovision',\n    );\n    await Promise.all(provisioningProfiles.map((file) => fs.remove(path.join(provisioningProfilesDir, file))));\n  }\n}\n\nexport default async function setup() {\n  logger.info('Setting up environment...');\n  await deleteProvisioningProfilesFromHomedir();\n  await keychain.cleanUp();\n  await commonSetup();\n  logger.info('Finished setting up environment');\n}\n"]}