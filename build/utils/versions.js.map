{"version":3,"file":"versions.js","sourceRoot":"","sources":["../../src/utils/versions.ts"],"names":[],"mappings":";;;;;AAAA,6BAA0B;AAE1B,sEAAsC;AAEtC,uDAAmC;AAEnC,KAAK,UAAU,uBAAuB,CAAC,QAAgB,EAAE,WAAqB;IAC5E,MAAM,EAAE,IAAI,EAAE,GAAG,IAAI,SAAG,CAAC,qDAAqD,EAAE,kBAAkB,EAAE,CAAC,CAAC;IACtG,MAAM,yBAAO,CAAC;QACZ,MAAM,EAAE,MAAM;QACd,GAAG,EAAE,IAAI;QACT,OAAO,EAAE;YACP,cAAc,EAAE,gBAAM,CAAC,GAAG,CAAC,sBAAsB;SAClD;QACD,IAAI,EAAE;YACJ,QAAQ;YACR,WAAW;SACZ;QACD,IAAI,EAAE,IAAI;KACX,CAAC,CAAC;AACL,CAAC;AA4BQ,0DAAuB;AA1BhC,KAAK,UAAU,gBAAgB,CAAC,OAAe;IAC7C,MAAM,EAAE,IAAI,EAAE,GAAG,IAAI,SAAG,CAAC,8CAA8C,EAAE,kBAAkB,EAAE,CAAC,CAAC;IAC/F,MAAM,yBAAO,CAAC;QACZ,MAAM,EAAE,MAAM;QACd,GAAG,EAAE,IAAI;QACT,OAAO,EAAE;YACP,cAAc,EAAE,gBAAM,CAAC,GAAG,CAAC,sBAAsB;SAClD;QACD,IAAI,EAAE;YACJ,OAAO;SACR;QACD,IAAI,EAAE,IAAI;KACX,CAAC,CAAC;AACL,CAAC;AAaiC,4CAAgB;AAXlD,SAAS,kBAAkB;IACzB,MAAM,UAAU,GAAG,gBAAM,CAAC,aAAa,CAAC;IACxC,IAAI,UAAU,KAAK,YAAY,EAAE;QAC/B,OAAO,iBAAiB,CAAC;KAC1B;SAAM,IAAI,UAAU,KAAK,SAAS,EAAE;QACnC,OAAO,yBAAyB,CAAC;KAClC;SAAM;QACL,OAAO,uBAAuB,CAAC;KAChC;AACH,CAAC","sourcesContent":["import { URL } from 'url';\n\nimport request from 'request-promise';\n\nimport config from 'turtle/config';\n\nasync function setSupportedSdkVersions(platform: string, sdkVersions: string[]) {\n  const { href } = new URL('/--/api/v2/standalone-build/setSupportedSDKVersions', resolveWWWEndpoint());\n  await request({\n    method: 'POST',\n    uri: href,\n    headers: {\n      'secret-token': config.www.sdkVersionsSecretToken,\n    },\n    body: {\n      platform,\n      sdkVersions,\n    },\n    json: true,\n  });\n}\n\nasync function setTurtleVersion(version: string) {\n  const { href } = new URL('/--/api/v2/standalone-build/setTurtleVersion', resolveWWWEndpoint());\n  await request({\n    method: 'POST',\n    uri: href,\n    headers: {\n      'secret-token': config.www.sdkVersionsSecretToken,\n    },\n    body: {\n      version,\n    },\n    json: true,\n  });\n}\n\nfunction resolveWWWEndpoint() {\n  const currentEnv = config.deploymentEnv;\n  if (currentEnv === 'production') {\n    return 'https://expo.io';\n  } else if (currentEnv === 'staging') {\n    return 'https://staging.expo.io';\n  } else {\n    return 'http://127.0.0.1:3000';\n  }\n}\n\nexport { setSupportedSdkVersions, setTurtleVersion };\n"]}