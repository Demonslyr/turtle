{"version":3,"file":"sentry.js","sourceRoot":"","sources":["../../../src/logger/streams/sentry.ts"],"names":[],"mappings":";;;;;AAAA,+DAAoD;AACpD,iCAA8C;AAE9C,0DAAmC;AAEnC,SAAwB,MAAM;IAC5B,IAAI,CAAC,gBAAM,CAAC,MAAM,CAAC,GAAG,IAAI,gBAAM,CAAC,aAAa,KAAK,aAAa,EAAE;QAChE,OAAO,IAAI,CAAC;KACb;IAED,MAAM,KAAK,GAAG,IAAI,cAAW,EAAE,CAAC;IAChC,KAAK,CAAC,MAAM,CAAC,gBAAM,CAAC,MAAM,CAAC,GAAG,EAAE,EAAE,WAAW,EAAE,gBAAM,CAAC,aAAa,EAAE,CAAC,CAAC;IACvE,OAAO;QACL,KAAK,EAAE,OAAO;QACd,IAAI,EAAE,KAAK;QACX,MAAM,EAAE,IAAI,mCAAY,CAAC,KAAK,CAAC;KAChC,CAAC;AACJ,CAAC;AAZD,yBAYC","sourcesContent":["import { SentryStream } from 'bunyan-sentry-stream';\nimport { Client as RavenClient } from 'raven';\n\nimport config from 'turtle/config';\n\nexport default function create() {\n  if (!config.sentry.dsn || config.deploymentEnv === 'development') {\n    return null;\n  }\n\n  const raven = new RavenClient();\n  raven.config(config.sentry.dsn, { environment: config.deploymentEnv });\n  return {\n    level: 'error',\n    type: 'raw', // Mandatory type for SentryStream\n    stream: new SentryStream(raven),\n  };\n}\n"]}